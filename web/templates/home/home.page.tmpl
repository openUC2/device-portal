{{template "shared/base.layout.tmpl" .}}

{{define "title" -}}
  {{- $machineName := .Data.MachineName -}}
  Machine {{$machineName}}
{{- end}}
{{define "description"}}Machine portal{{end}}

{{define "content"}}
  {{$hostname := .Data.Hostname}}
  {{$port := .Data.Port}}
  {{$machineName := .Data.MachineName}}

  <main>
    <section class="section content">
      <div class="container">
        <h1>Machine {{$machineName}}</h1>
        <p>
          Welcome! This is the home page for your machine with machine name
          <code>{{$machineName}}</code>.
        </p>
        <p>
          Below you can find a list of links to browser applications provided by your machine,
          documentation for operating your machine,
          and other information to help you use your machine.
        </p>

        {{if not (hasSuffix ".local" $hostname)}}
          <article class="message is-warning">
            <div class="message-body">
              Note: you are using the hostname <code>{{$hostname}}</code>, which might not work
              outside of direct connections to the machine through its Wi-Fi hotspot or through
              an Ethernet cable. If/when you want to connect to the machine through a Wi-Fi
              router or Ethernet router (for example because you have connected your machine to
              the internet through an external Wi-Fi network, which disables the machine's
              Wi-Fi hotspot under certain conditions), you may instead need to use
              <a href="//openuc2-{{$machineName}}.local">openuc2-{{$machineName}}.local</a>
              to access this machine (though
              <a href="//openuc2.local">openuc2.local</a>
              should also work if no other machine are connected to the router).
            </div>
          </article>
        {{else if not (hasPrefix "openuc2-" $hostname)}}
          <article class="message is-info">
            <div class="message-body">
              Note: you are using the hostname <code>{{$hostname}}</code>, which will be ambiguous
              if/when you are potentially connected (either directly or indirectly) to multiple
                machine. In such situations, you will instead need to use
              <a href="//openuc2-{{$machineName}}.local">openuc2-{{$machineName}}.local</a>
              to access this machine.
            </div>
          </article>
        {{end}}

        <h2>Browser applications</h2>
        <p>(no browser applications have been registered yet!)</p>

        <h2>Need help?</h2>

        <h3 class="is-size-5">Wrong machine?</h3>
        <p>
          This machine has machine name <code>{{$machineName}}</code>. If you're looking for a
          different machine:
        </p>
        <ul>
          <li>
            You should use your web browser to open that machine's machine-specific URL
            instead.
            {{if hasSuffix ".uc2" $hostname}}
              For example, the machine-specific URL for this machine is
              <a href="//{{$machineName}}.uc2">
                {{- /* make template ignore the line break */ -}}
                {{$machineName}}.uc2
                {{- /* make template ignore the line break */ -}}
              </a>.
              Alternatively,
              <a href="//openuc2-{{$machineName}}.local">
                {{- /* make template ignore the line break */ -}}
                openuc2-{{$machineName}}.local
                {{- /* make template ignore the line break */ -}}
              </a>
              might also work if your web browser supports mDNS.
            {{else if hasSuffix ".local" $hostname}}
              For example, the machine-specific URL for this machine is
              <a href="//openuc2-{{$machineName}}.local">
                {{- /* make template ignore the line break */ -}}
                openuc2-{{$machineName}}.local
                {{- /* make template ignore the line break */ -}}
              </a>.
              Alternatively,
              <a href="//{{$machineName}}.uc2">
                {{- /* make template ignore the line break */ -}}
                {{$machineName}}.uc2
                {{- /* make template ignore the line break */ -}}
              </a>
              might also work if you're connecting directly to your machine (i.e. to its
              Ethernet port or to a Wi-Fi network created by your machine) and your web browser
              isn't using Private DNS to look up domain names.
            {{end}}
          </li>
          <li>
            {{if hasSuffix ".uc2" $hostname}}
              You're probably trying to connect directly to your machine (i.e. to its Ethernet
              port or to a Wi-Fi network created by that machine). You
            {{else}}
              If you're trying to connect directly to a different machine (i.e. to its Ethernet
              port or to a Wi-Fi network created by that machine), you
            {{end}}
            might need to change your
            network configuration in order to connect to that machine's Wi-Fi network or
            Ethernet port, and you might also need to disconnect from
            <code>{{$machineName}}</code>'s Wi-Fi network or Ethernet port.
          </li>
        </ul>

        <h2>For advanced users</h2>
        <h3 class="is-size-5">Browser applications</h3>
        <p>(no browser applications have been registered yet!)</p>

        <h3 class="is-size-5">Network APIs</h3>
        <p>(no network APIs have been registered yet!)</p>

        <h3 class="is-size-5">System infrastructure</h3>
        <p>(no system infrastructure components have been registered yet!)</p>
      </div>
    </section>
  </main>
{{end}}
